<section>
  <div class="header">
    Sesiones
  </div>

  <div class="content">
    <div class="cards">
      <div class="card card-new clickable" (click)="addModal()">
        <div class="card-icon"><span class="fa-solid fa-plus"></span></div>
        <div class="card-header">Nueva sesión</div>
      </div>
      <div class="card" *ngFor="let option of reservations">
        <div class="card-icon"><span class="fa-solid fa-calendar-check"></span></div>
        <div class="card-header">{{getSeasonName(option.seasonId)}}</div>
        <div class="card-info">{{getUserName(option.userId)}}</div>
        <div class="card-info">{{getSeatName(option.seatId)}}</div>
        <div class="card-option clickable" (click)="delete(option)"><span class="fa-solid fa-cancel"></span></div>
      </div>
    </div>
  </div>
</section>


<app-modal #modalAdd [titulo]="'Nuevo'" [style]="'width:80%; min-height:40%;'">
  <div class="form-container">
    <div class="form-container-body">
      <app-formulary [form]="addForm">
        <div [formGroup]="addForm">
          <div class="form-container-body-item">
            <div>Sesión</div>
            <div>
              <app-select [formControlName]="'seasonId'" [options]="seasons" [valueField]="'id'" [labelField]="'name'" (valueChanged)="onSeasonChange($event)"></app-select>
            </div>
          </div>
          <div class="form-container-body-item">
            <div>Asientos</div>
            <div class="cards" *ngFor="let row of seatsByRoom">
              <div *ngFor="let col of row">
                {{col.seat.row}}:{{col.seat.column}}
                <app-input-check [disabled]="col.reserved" [size]="25" [(ngModel)]="col.selected" [ngModelOptions]="{standalone: true}"></app-input-check>
              </div>
            </div>
          </div>
        </div>
      </app-formulary>
    </div>
    <div class="form-container-bottom">
      <app-button label="Crear" (clicked)="add()"></app-button>
    </div>
  </div>
</app-modal>

